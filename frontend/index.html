<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedditMiner</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>RedditMiner</h1>
        <p class="subtitle">Find real product opportunities on Reddit. Filter out the noise.</p>
        <p class="tagline">Free & open alternative to GummySearch. No signup required.</p>

        <!-- Mode Tabs -->
        <div class="mode-tabs">
            <button class="mode-tab active" onclick="switchMode('demand', this)">Demand Finder</button>
            <button class="mode-tab" onclick="switchMode('task', this)">Task Hunter</button>
        </div>

        <!-- Demand Finder Panel (original) -->
        <div id="demandPanel" class="search-panel">
            <div class="input-group">
                <label>Subreddit</label>
                <input type="text" id="subreddit" value="SideProject" placeholder="e.g. SideProject, smallbusiness">
            </div>
            <div class="input-group">
                <label>Keyword</label>
                <input type="text" id="keyword" value="I wish there was" placeholder="e.g. I wish, need a tool">
            </div>
            <div class="input-group">
                <label>Time Range</label>
                <select id="timeFilter">
                    <option value="week">Past Week</option>
                    <option value="month" selected>Past Month</option>
                    <option value="year">Past Year</option>
                </select>
            </div>
            <div class="input-group">
                <label>Limit</label>
                <input type="number" id="limit" value="50" min="10" max="200">
            </div>
            <button id="scanBtn" onclick="scan()">Scan</button>
        </div>

        <!-- Task Hunter Panel (new) -->
        <div id="taskPanel" class="search-panel" style="display:none;">
            <div class="input-group" style="flex:2;">
                <label>Subreddits (comma separated)</label>
                <input type="text" id="taskSubreddits" value="slavelabour,forhire,hiring,freelance" placeholder="e.g. slavelabour,forhire">
            </div>
            <div class="input-group">
                <label>Time Range</label>
                <select id="taskTimeFilter">
                    <option value="hour">Past Hour</option>
                    <option value="day" selected>Past Day</option>
                    <option value="week">Past Week</option>
                </select>
            </div>
            <div class="input-group">
                <label>Limit</label>
                <input type="number" id="taskLimit" value="50" min="10" max="200">
            </div>
            <button id="taskScanBtn" onclick="scanTasks()">Hunt Tasks</button>
            <div class="scheduler-controls">
                <button class="scheduler-btn start" onclick="startScheduler()" title="Start auto-scan every 30 min">Auto ON</button>
                <button class="scheduler-btn stop" onclick="stopScheduler()" title="Stop auto-scan">Auto OFF</button>
                <button class="scheduler-btn notify" onclick="scanNowAndNotify()" title="Scan now & send Telegram notification">Scan & Notify</button>
            </div>
        </div>

        <!-- Demand Stats -->
        <div id="stats" class="stats-panel" style="display:none;">
            <div class="stat-card need">
                <div class="stat-number" id="statNeed">0</div>
                <div class="stat-label">Product Need</div>
            </div>
            <div class="stat-card personal">
                <div class="stat-number" id="statPersonal">0</div>
                <div class="stat-label">Personal Issue</div>
            </div>
            <div class="stat-card worth">
                <div class="stat-number" id="statWorth">0</div>
                <div class="stat-label">Worth Looking</div>
            </div>
            <div class="stat-card unclear">
                <div class="stat-number" id="statUnclear">0</div>
                <div class="stat-label">Unclear</div>
            </div>
            <div class="stat-card total">
                <div class="stat-number" id="statTotal">0</div>
                <div class="stat-label">Total</div>
            </div>
        </div>

        <!-- Task Stats -->
        <div id="taskStats" class="stats-panel" style="display:none;">
            <div class="stat-card skill-match">
                <div class="stat-number" id="statSkillMatch">0</div>
                <div class="stat-label">Skill Match</div>
            </div>
            <div class="stat-card maybe">
                <div class="stat-number" id="statMaybe">0</div>
                <div class="stat-label">Maybe</div>
            </div>
            <div class="stat-card irrelevant-stat">
                <div class="stat-number" id="statIrrelevant">0</div>
                <div class="stat-label">Irrelevant</div>
            </div>
            <div class="stat-card danger-stat">
                <div class="stat-number" id="statDanger">0</div>
                <div class="stat-label">Danger</div>
            </div>
            <div class="stat-card total">
                <div class="stat-number" id="statTaskTotal">0</div>
                <div class="stat-label">Total</div>
            </div>
        </div>

        <!-- Demand Filter Tabs -->
        <div id="demandFilters" class="filter-tabs">
            <button class="tab active" onclick="filterPosts('all', this)">All</button>
            <button class="tab" onclick="filterPosts('product_need', this)">Product Need</button>
            <button class="tab" onclick="filterPosts('worth_looking', this)">Worth Looking</button>
            <button class="tab" onclick="filterPosts('personal_issue', this)">Personal Issue</button>
            <button class="tab" onclick="filterPosts('unclear', this)">Unclear</button>
        </div>

        <!-- Task Filter Tabs -->
        <div id="taskFilters" class="filter-tabs" style="display:none;">
            <button class="tab active" onclick="filterTasks('all', this)">All</button>
            <button class="tab" onclick="filterTasks('skill_match', this)">Skill Match</button>
            <button class="tab" onclick="filterTasks('maybe_match', this)">Maybe</button>
            <button class="tab" onclick="filterTasks('irrelevant', this)">Irrelevant</button>
            <button class="tab" onclick="filterTasks('danger', this)">Danger</button>
        </div>

        <div id="loading" style="display:none;" class="loading">Scanning...</div>
        <div id="results" class="results"></div>
    </div>

    <script src="app.js"></script>
</body>

</html>